"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[78352],{978352:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var n=i(667294),o=i(545007),a=i(20256),s=i(578373),r=i(785893);let l="cubic-bezier(0, 0, 0.58, 1)",c={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:l,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function p({reactionLabel:e,handleHideConfirmation:t}){let[i,o]=(0,n.useState)("loaded"),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e,i;return s.current=requestAnimationFrame(()=>{e=setTimeout(()=>o("fade"),1e3),i=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(i)}},[]),(0,r.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:(0,r.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{...c[i],whiteSpace:"nowrap"}},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,position:"absolute",rounding:"pill",zIndex:new a.Ry(2),children:(0,r.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:e})})})}var d=i(233846),h=i(970601),u=i(76239),m=i(460632);let g={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},y={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function f({reactionButtonRect:e,handleReactionTrayClick:t,shouldShowReactionTrayUp:i}){let o=(0,d.ZP)(),s=(0,n.useRef)(null),[l,c]=(0,n.useState)("loading"),[p,f]=(0,n.useState)(""),[x,b]=(0,n.useState)(),{closeupWithinMasonryEnabled:_}=(0,m.x4)(),[v,w]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[j,T]=(0,n.useState)({}),[R]=(0,n.useState)(e),[C,I]=(0,n.useState)(-150),A=(0,n.useRef)(void 0),E=(0,n.useRef)({}),z=s.current?.getBoundingClientRect();(0,n.useEffect)(()=>{z?.right&&z?.right>(window.innerWidth||document.documentElement?.clientWidth)&&(-276!==C?k(!0):k(!1),I(-276))},[z?.right,C,_]),(0,n.useEffect)(()=>{"loading"===l&&(A.current=requestAnimationFrame(()=>c("loaded"))),w(!0);let e={...j};u.Jg.forEach(t=>{E.current[t]&&(!e[t]||S)&&(e[t]=E.current[t].getBoundingClientRect())}),Object.keys(e).length===u.Jg.length&&T(e),!x&&v&&(()=>{let e={...x};u.Jg.forEach(t=>{let i=j[t],{left:n,top:o}=R,{left:a,top:s}=i;e[t]={translateX:n-a+-8,translateY:o-s+9}}),b(e)})()},[v,C,e]);let P=()=>{"clicked"===l&&p&&(c("flying"),setTimeout(()=>{t(p)},750))},B=u.Jg.map((e,t)=>{let{staticAsset:i,animatedAsset:n,label:s,htmlStyle:c,animationStyle:d}=(0,u.fW)(e,o),m={loadedStyle:{transitionDelay:`${.08*t}s`,...g[l]},clickedStyle:{...p===e?g.clicked:g.loaded},flyingStyle:{...x&&p===e?{transform:`translateZ(0) translateX(${x[e].translateX}px) translateY(${x[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...g[l]}:g.fading}},y={};return"loading"===l||"loaded"===l?y={...m.loadedStyle}:"clicked"===l?y={...m.clickedStyle}:"flying"===l&&(y={...m.flyingStyle}),(0,r.jsx)(a.xu,{alignSelf:"center",display:"flex",justifyContent:"between",children:(0,r.jsxs)(a.xu,{ref:t=>{E.current[e]=t},alignItems:"center",dangerouslySetInlineStyle:{__style:{...y}},display:"flex",justifyContent:"center",maxHeight:40,maxWidth:40,overflow:"visible",position:"relative",children:[p!==e&&(0,r.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,r.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:40,width:40})}),(0,r.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",position:"relative",children:[(0,r.jsx)(h.Z,{unsafeCSS:c}),p===e&&"clicked"===l&&(0,r.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:g.label},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,rounding:"pill",children:(0,r.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:s})}),(0,r.jsx)("div",{onClick:P,onKeyDown:P,role:"presentation",children:(0,r.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...g.icon,...p===e&&"clicked"===l?{animation:d}:{},backgroundImage:`url(${n})`}},display:"flex",height:40,justifyContent:"center",width:40})})]})]})},t)});return(0,r.jsx)(a.xu,{ref:s,alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:_?void 0:C,marginTop:!_&&i?-(80+R.height):0}},display:"flex",justifyContent:"center",position:_?void 0:"absolute",children:(0,r.jsx)(a.xu,{alignItems:"center",color:"flying"===l?"transparent":"default",dangerouslySetInlineStyle:{__style:{...!_&&"flying"!==l?y:{}}},display:"flex",height:80,justifyContent:"center",onMouseMove:e=>{let{clientX:t}=e;if(s.current){let e=_?t-s.current.getBoundingClientRect().left:t;if("flying"!==l){let t,i=(v&&u.Jg.forEach(i=>{let n=j[i];if(n&&n.left&&n.right){let{left:o,right:a}=n;e>=o&&e<=a&&(t=i)}}),t||null);i!==p&&f(i),c("clicked")}}},rounding:"pill",width:300,children:(0,r.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"around",paddingX:5,width:"100%",children:B})})})}var x=i(19963),b=i(135376),_=i(119343),v=i(297934),w=i(967312),S=i(827491),k=i(488879),j=i(437318),T=i(913105);function R(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function C({children:e,showTooltip:t,tooltipText:i}){return t?(0,r.jsx)(a.u,{inline:!0,text:i,zIndex:new a.Ry(2),children:e}):e}class I extends n.PureComponent{constructor(...e){super(...e),R(this,"state",{isConfirmationShowing:!1,isHoveringOverTray:!1,isReactionTrayShowing:!1,reactionButtonRect:null,active:!1}),R(this,"reactionButtonRef",(0,n.createRef)()),R(this,"tooltipExperience",{}),R(this,"trayOpenTimer",null),R(this,"trayCloseTimer",null),R(this,"isHoveringOverButton",!1),R(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),R(this,"handleReactForAuthViewer",(e=7)=>{let{clientTrackingParams:t,pinId:i,pinUpdateReactionCount:n,reactionByMe:o}=this.props,a={pin_id:i,reaction_type:e,client_tracking_params:t,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};o&&n(i,!1,o),n(i,!0,e),s.Z.create("ReactionsResource",a).callUpdate()}),R(this,"handleUnreactForAuthViewer",()=>{let{clientTrackingParams:e,pinId:t}=this.props,i={pin_id:t,client_tracking_params:e,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};s.Z.create("ReactionsResource",i).callDelete()}),R(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef?.current&&this.reactionButtonRef.current instanceof HTMLElement){let e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),R(this,"openTrayWithDelay",()=>{let{handleReactionTrayHover:e}=this.props;setTimeout(()=>{this.isHoveringOverButton&&(this.setState({isReactionTrayShowing:!0}),e&&e(!0),this.tooltipExperience&&this.tooltipExperience.complete&&this.tooltipExperience.complete())},1e3)}),R(this,"closeTray",()=>{let{handleReactionTrayHover:e}=this.props;this.setState({isReactionTrayShowing:!1}),e&&e(!1)}),R(this,"startTrayCloseTimer",()=>{this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{let{isHoveringOverTray:e}=this.state;e||this.isHoveringOverButton||this.closeTray()},300)}),R(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),R(this,"handleExitTrayWithDelay",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),R(this,"handleClickButton",()=>{let{clientTrackingParams:e,requireAuth:t,component:i,pinId:n,pinUpdateReactionCount:o,reactionByMe:a,viewParameter:s,viewType:r,logContextEvent:l}=this.props;a?(o(n,!1,a),t?t():this.handleUnreactForAuthViewer()):this.setReaction("love"),this.closeTray(),l({event_type:101,view_type:r||3,view_parameter:s||139,...i?{component:i}:Object.freeze({}),element:11354,object_id_str:n,clientTrackingParams:e})}),R(this,"setReaction",e=>{let{requireAuth:t,i18n:i}=this.props;t?t():this.handleReactForAuthViewer((0,u.fW)(e,i).type),this.handleShowConfirmation()}),R(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),R(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){this.trayOpenTimer&&clearTimeout(this.trayOpenTimer),this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){let{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:i}=this.state,{iconColor:n="darkGray",idealDirection:o,reactionByMe:s,shouldShowReactionTrayUp:l=!1,showBackground:c,showTooltip:d,reactionButtonSize:h,reactionIconSize:m,closeupWithinMasonryEnabled:g}=this.props,y=this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled,x=s&&u.GY[s]?u.GY[s]:"default",{staticAsset:b,label:v}=(0,u.fW)(x,this.props.i18n,n),w=e&&!!t&&!!t.left&&!!t.top&&(0,r.jsx)(f,{handleReactionTrayClick:this.setReaction,reactionButtonRect:t,shouldShowReactionTrayUp:l}),S=this.props.i18n._('React', 'Closeup.ReactionPicker.Icon', 'Icon for reacting to current pin');return(0,r.jsxs)(a.xu,{position:"relative",children:[y?(0,r.jsx)(a.hU,{accessibilityLabel:S,dataTestId:"react-button",icon:s?"heart":"heart-outline",iconColor:s?"red":void 0,onClick:this.handleClickButton,tooltip:{text:S}}):(0,r.jsx)(C,{showTooltip:!i||!this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled,tooltipText:S,children:(0,r.jsx)(a.iP,{ref:this.reactionButtonRef,accessibilityLabel:"reaction",dataTestId:"react-button",onBlur:()=>{this.setState({active:!1})},onMouseEnter:()=>{this.isHoveringOverButton=!0,this.setState({active:!0}),this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled||this.openTrayWithDelay()},onMouseLeave:()=>{this.isHoveringOverButton=!1,this.setState({active:!1}),this.startTrayCloseTimer()},onTap:this.handleClickButton,rounding:"circle",children:(0,r.jsx)(a.xu,{color:c?"secondary":g?"transparent":"default",dangerouslySetInlineStyle:{__style:{...this.state.active?{backgroundColor:"#E9E9E9"}:{}}},rounding:"circle",children:(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"center",minHeight:h,minWidth:h,children:(0,r.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${b})`}},display:"flex",height:m,justifyContent:"center",width:m})})})})}),d&&!e&&!i&&(0,r.jsx)(_.mc,{anchor:this.reactionButtonRef?.current,experienceIds:[501977,501995],flyoutSize:"sm",idealDirection:"down",onExperienceMount:this.handleExperienceMount,placementId:12}),e&&!!t&&!!t.left&&!!t.top&&(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(a.Le,{top:0,children:(0,r.jsx)(a.iP,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleExitTrayWithDelay,onTap:this.handleExitTrayWithDelay,children:g?(0,r.jsx)(a.mh,{zIndex:new a.Ry(j.rv),children:(0,r.jsx)(a.J2,{__overflow:"visible",anchor:this.reactionButtonRef?.current,idealDirection:o,onDismiss:this.closeTray,positionRelativeToAnchor:!1,size:"xl",children:w})}):w})})}),!g&&i&&!!s&&v&&(0,r.jsx)(p,{handleHideConfirmation:this.handleHideConfirmation,reactionLabel:v})]})}}function A(e){let{logContextEvent:t}=(0,x.u)(),i=(0,d.ZP)(),n=(0,b.Z)(),a=(0,S.Z)(),s=(0,v.Z)(),l=(0,k.lJ)(s,a),c=(0,o.I0)(),{closeupWithinMasonryEnabled:p}=(0,m.x4)(),{checkExperiment:h}=(0,w.r)();return(0,r.jsx)(I,{...e,checkExperiment:h,closeupWithinMasonryEnabled:p,i18n:i,logContextEvent:t,orbacSubjectId:l,pinUpdateReactionCount:(e,t,i)=>c((0,T.fA)(e,t,i)),requireAuth:n})}R(I,"defaultProps",{reactionButtonSize:44,reactionIconSize:24})},76239:(e,t,i)=>{i.d(t,{GY:()=>v,Jg:()=>_,fW:()=>w});var n=i(141594),o=i(42966),a=i(721366),s=i(252739),r=i(725170),l=i(921028),c=i(590755),p=i(861374),d=i(805525),h=i(736929),u=i(616097),m=i(486722),g=i(692984),y=i(808532),f=i(37260),x=i(308220),b=i(446649);let _=["goodIdea","love","thanks","wow","haha"],v={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,i="darkGray")=>{let _={default:{staticAsset:"white"===i?u:h},goodIdea:{staticAsset:a,animatedAsset:n,gridAsset:o,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:s,gridAsset:r,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:d,animatedAsset:c,gridAsset:p,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:y,animatedAsset:m,gridAsset:g,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:b,animatedAsset:f,gridAsset:x,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&_[e]?_[e]:_.default}},141594:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},42966:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},721366:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},252739:e=>{e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},725170:e=>{e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},921028:e=>{e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},590755:e=>{e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},861374:e=>{e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},805525:e=>{e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},736929:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},616097:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},486722:e=>{e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},692984:e=>{e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},808532:e=>{e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},37260:e=>{e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},308220:e=>{e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},446649:e=>{e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/78352-c6322297216c38e1.mjs.map