"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[47442],{792862:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var o=t(667294),a=t(545007),i=t(20256),r=t(985459),l=t(547504),s=t(95460),d=t(119343),c=t(233846),u=t(298568);function p({constraint:e}){let n=(0,u.A)(),t=n?.getId();return(0,o.useEffect)(()=>{n&&n.markConstraintComplete(e)},[t,e]),null}var v=t(349057),m=t(181710),h=t(943369),f=t(677316),k=t(755090),S=t(961238),x=t(356204),P=t(739951),_=t(506536),b=t(757653),w=t(785893);let T=(0,b.Z)(()=>t.e(43473).then(t.bind(t,16736)),void 0,e=>16736,"PinSaveButtonCommon"),y=(0,o.lazy)(async()=>({default:(await Promise.all([t.e(69965),t.e(50714),t.e(22538)]).then(t.bind(t,797043))).QuickSaveButtonWithExperienceAnchor})),C=({boardCount:e=0,clientTrackingParams:n,onBoardSelectionFlyoutChange:t,onClickCallback:b,pin:C,showEnabledSaveBehavior:I,showRepinOnInitialRender:g,variant:A,viewParameter:B,viewType:Z,saveToBoardFromPostDownloadUpsell:j,setSaveToBoardFromPostDownloadUpsell:D})=>{let Q=(0,u.A)(),{experience:U}=(0,d.Ow)(1000310),{experience:F}=(0,d.Ow)(12),M=(0,f.Z)(),E=(0,a.I0)(),R=(0,c.ZP)(),K=(0,o.useRef)(!1),{pins:O,clear:N}=(0,x.Z)(),J=(0,h.M0)().getItem(l.M8)||"",q=J?J===C.id:!!O&&O.length>0&&O[O.length-1].id===C.id;(0,k.Z)(()=>{K.current||2!==O.length&&(1!==O.length||q)||(K.current=!0,(2===O.length&&!J&&q?[O[0]]:O).forEach(({id:e,nodeId:n})=>{(0,r.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},R).then(t=>{let{id:o,url:a,name:i}=t;E((0,P.d)({boardId:o,url:a,title:i||"",pinId:e||"",nodeId:n}))})}),q||N())});let z=()=>{(0,h.M0)().removeItem(l.M8),N(),M({action:"trigger",item:"unauth-save-button-quicksave"}),E((0,_.Z)(!0)),E((0,P.d)({boardId:"",url:"",title:"Profile",pinId:C.id,nodeId:C?.node_id})),E((0,P.X)(C))},H=()=>{(0,v.Nx)("button"),Q&&Q.markConstraintComplete("button")};if(C?.pinner?.blocked_by_me||C?.promoted_is_removable)return(0,v.Nx)("button"),(0,w.jsx)(p,{constraint:"button"});if(U&&502450===U.experience_id)return(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,w.jsx)(m.Z,{children:(0,w.jsx)(y,{autoQuicksaveCallback:z,clientTrackingParams:n,experience:U,onClickCallback:b,onMount:H,pinKey:{type:"deprecated",data:C},saveToBoardFromPostDownloadUpsell:j,setSaveToBoardFromPostDownloadUpsell:D,shouldAutoQuicksave:q,showEnabledSaveBehavior:I,viewParameter:B})})});let V=!C.content_sensitivity?.is_sensitive_content&&void 0!==e,W=[501041],X=F&&501041===F.experience_id&&F.display_data.has_tooltip?e=>(0,w.jsx)(d.Qp,{anchor:e,experienceIds:W,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,w.jsx)(d.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return V?(0,w.jsx)(i.xu,{children:(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,w.jsx)(S.default,{autoQuicksaveCallback:z,clientTrackingParams:n,onClickCallback:b,onMount:H,onToggleFlyout:t,pinKey:{type:"deprecated",data:C},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:j,setSaveToBoardFromPostDownloadUpsell:D,shouldAutoQuicksave:q,variant:A,viewParameter:B,viewType:Z})})}):(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,w.jsx)(m.Z,{children:(0,w.jsx)(T,{clientTrackingParams:n,isCloseupPin:!0,onClickCallback:b,onMount:H,pinKey:{type:"deprecated",data:C},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:j,setSaveToBoardFromPostDownloadUpsell:D,showRepinOnInitialRender:g})})})}},506536:(e,n,t)=>{t.d(n,{Z:()=>o});function o(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-4babe4349079096e.mjs.map